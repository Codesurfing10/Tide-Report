<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location Widget Example - Tide Report</title>
    
    <!-- Include the widget CSS -->
    <link rel="stylesheet" href="../public/location-widget.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(to bottom, #7FDBFF, #001f3f);
            color: #fff;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .demo-container {
            max-width: 800px;
            margin: 100px auto 0;
            background: rgba(0, 31, 63, 0.8);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
        }

        h1 {
            color: #FFB851;
            margin-top: 0;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .instructions h2 {
            color: #F687B3;
            margin-top: 0;
        }

        .instructions ol {
            line-height: 1.8;
        }

        .event-log {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .event-log h3 {
            color: #9F7AEA;
            margin-top: 0;
        }

        .log-entry {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 3px solid #FFB851;
        }

        .log-empty {
            color: #999;
            font-style: italic;
        }

        code {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 3px;
            color: #FFB851;
        }

        .integration-example {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .integration-example h3 {
            color: #9F7AEA;
            margin-top: 0;
        }

        .integration-example pre {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            color: #7FDBFF;
        }
    </style>
</head>
<body>
    <!-- Location Widget Container -->
    <div id="location-widget"></div>

    <div class="demo-container">
        <h1>üåç Location Widget Demo</h1>
        
        <div class="instructions">
            <h2>How to Use:</h2>
            <ol>
                <li>Look at the <strong>top-left corner</strong> of the page</li>
                <li>Click the input field and start typing a city name (e.g., "San Francisco", "London", "Tokyo")</li>
                <li>Or enter coordinates directly: <code>37.7749, -122.4194</code></li>
                <li>Select a location from the suggestions</li>
                <li>Watch the event log below to see the data emitted</li>
            </ol>
        </div>

        <div class="event-log">
            <h3>üì° Event Log</h3>
            <div id="log-content" class="log-empty">
                Waiting for location selection...
            </div>
        </div>

        <div class="integration-example">
            <h3>üí° Integration Example</h3>
            <p>To integrate the widget into your application, add this to your HTML:</p>
            <pre><code>&lt;!-- Include CSS and JS --&gt;
&lt;link rel="stylesheet" href="public/location-widget.css"&gt;
&lt;script src="public/location-widget.js"&gt;&lt;/script&gt;

&lt;!-- Add container element --&gt;
&lt;div id="location-widget"&gt;&lt;/div&gt;

&lt;!-- Listen for location selection --&gt;
&lt;script&gt;
  window.addEventListener('location-selected', (event) =&gt; {
    const { display_name, lat, lon } = event.detail;
    console.log('Selected:', display_name);
    console.log('Coordinates:', lat, lon);
    
    // Update your app with the new location
    // e.g., fetchTideData(lat, lon);
  });
&lt;/script&gt;</code></pre>
        </div>

        <div class="instructions">
            <h2>‚ö†Ô∏è Important Notes:</h2>
            <ul>
                <li><strong>Rate Limiting:</strong> Nominatim is free but rate-limited to 1 request/second</li>
                <li><strong>User-Agent:</strong> The widget includes a proper User-Agent header as required by Nominatim</li>
                <li><strong>Production Use:</strong> For high-traffic sites, consider using a paid geocoding service or self-hosting Nominatim</li>
                <li><strong>Coordinates:</strong> Direct coordinate input bypasses the API and works offline</li>
            </ul>
        </div>
    </div>

    <!-- Include the widget JavaScript -->
    <script src="../public/location-widget.js"></script>

    <!-- Demo event listener -->
    <script>
        const logContent = document.getElementById('log-content');
        let eventCount = 0;

        window.addEventListener('location-selected', (event) => {
            eventCount++;
            const { display_name, lat, lon } = event.detail;
            
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `
                <strong>Event #${eventCount}</strong><br>
                <strong>Location:</strong> ${display_name}<br>
                <strong>Latitude:</strong> ${lat}<br>
                <strong>Longitude:</strong> ${lon}<br>
                <strong>Time:</strong> ${new Date().toLocaleTimeString()}
            `;
            
            // Remove "waiting" message if present
            if (logContent.classList.contains('log-empty')) {
                logContent.classList.remove('log-empty');
                logContent.innerHTML = '';
            }
            
            // Add new entry at the top
            logContent.insertBefore(logEntry, logContent.firstChild);
            
            // Keep only last 5 entries
            while (logContent.children.length > 5) {
                logContent.removeChild(logContent.lastChild);
            }
        });
    </script>
</body>
</html>
